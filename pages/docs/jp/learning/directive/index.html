<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf8">
  <title>3. ディレクティブ: IAM.mml Docs</title>
  <link rel="icon" href="/img/iam-mml-logo.svg" type="image/svg+xml">
  <link rel="stylesheet" type="text/css" href="../../index.css?0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/stackoverflow-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="../../index.js?0"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <div id="menu"></div>
  <script>createMenu("../")</script>

  <div id="main">
    <h1>3. ディレクティブ</h1>

    <hr>

    <h2>3.1. ディレクティブとは</h2>

    <p>
      「ディレクティブ(directive)」とはIAM.mmlコンパイラへの指令です。
      また、ディレクティブ行とは、「#」から始まる行のことです。
      主に、すべてのパートの設定を変更するために使います。
    </p>

    <p>
      ディレクティブはディレクティブ行を境に設定が適用されます。
      そのため、「同じ楽譜を繰り返すのだから、このパートは予め先に書いておこう」と言って書かれたような演奏時刻の同期が取れていないパートがあるときは、ディレクティブを使って良いか注意しましょう。
    </p>

    <h2>3.2. #tempo</h2>

    <p>
      #tempoディレクティブはすべてのパートのテンポを変更します。
      「#tempo」「空白」「1から1000までの整数値」を連ねます。
    </p>

    <pre><code class="mml">; この行を境にすべてのパートのテンポを128に設定。
#tempo 128

part1 o4 [gfe]2
part2 o3 [cde]2

; WARN: あえてpart2の楽譜をここに書いて同期をずらす。
;       この行のテンポは128。
part2 [ced]2

; この行を境にすべてのパートのテンポを89に設定
; WARN: 演奏時刻ではなく行を基準にテンポを設定するため、
;       演奏時刻の同期がされていないと意図しないテンポ変化になる。
#tempo 89

; WARN: この行のテンポは89。
;       8行目のpart2と同時に演奏されるが、それぞれのテンポが異なる。
part1 [&gt;c&lt;gf]2</code></pre>

    <h2>3.3. #denom</h2>

    <p>
      #denomディレクティブは拍子記号の分母(1拍が何分音符か)を設定します。
      「#denom」「空白」「1から128までの整数値」を連ねます。
    </p>

    <pre><code class="mml">; 標準では1拍は四分音符が基準になっている。
part cdef

; 1拍の基準を8に設定する。
#denom 8

; 1拍の基準が変わったため、テンポが変わる。
part cdef</code></pre>

    <h2>3.4. #key</h2>

    <p>
      #keyディレクティブはすべてのパートの調を変更します。
      「#key」「空白」「変化記号が付く音名」「変化記号」を連ねます。
    </p>

    <pre><code class="mml">#tempo 60
#key cf+

base o3v0.2 [d&lt;abf gdga]3

melody1 o5v0.2 [r1]2
melody1 fedc &lt;bab&gt;c dc&lt;ba gfge

melody2 o5v0.2 [r1]4
melody2 fedc &lt;bab&gt;c</code></pre>

    <br>
    <br>
    <br>

    <div style="text-align: center;">
      <a href="../instrument">次章へ進む</a>
    </div>

    <br>
    <br>
    <br>


  </div>
</body>

</html>
